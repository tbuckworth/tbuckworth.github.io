<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Alignment Problem | Titus Buckworth</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .game-container {
            background: var(--card-bg);
            border-radius: 20px;
            border: 1px solid var(--border);
            padding: 2rem;
            margin-top: 2rem;
        }

        .game-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-box {
            background: rgba(255,255,255,0.5);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-box .label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        .stat-box .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
        }

        .stat-box.warning .value {
            color: #c44;
        }

        .stat-box.good .value {
            color: var(--accent);
        }

        .game-scenario {
            background: rgba(196, 105, 61, 0.08);
            border-left: 3px solid var(--accent);
            padding: 1.5rem;
            border-radius: 0 12px 12px 0;
            margin-bottom: 2rem;
        }

        .game-scenario h3 {
            color: var(--accent);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .game-scenario p {
            margin-bottom: 0;
            font-size: 0.95rem;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .choice-btn {
            background: rgba(255,255,255,0.6);
            border: 1px solid var(--border);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            font-size: 0.95rem;
            color: var(--text);
        }

        .choice-btn:hover {
            border-color: var(--accent);
            background: rgba(255,255,255,0.8);
            transform: translateX(5px);
        }

        .choice-btn .choice-label {
            font-weight: 600;
            display: block;
            margin-bottom: 0.25rem;
        }

        .choice-btn .choice-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .choice-btn.dangerous:hover {
            border-color: #c44;
            background: rgba(200, 60, 60, 0.08);
        }

        .game-log {
            background: rgba(0,0,0,0.03);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 2rem;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.85rem;
        }

        .game-log p {
            margin-bottom: 0.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .game-log p:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .log-turn {
            color: var(--accent);
            font-weight: 600;
        }

        .game-over {
            text-align: center;
            padding: 2rem;
        }

        .game-over h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .game-over .score {
            font-size: 3rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        .game-over p {
            max-width: 500px;
            margin: 0 auto 1.5rem;
        }

        .restart-btn {
            background: linear-gradient(135deg, var(--gradient-1), var(--gradient-2));
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 50px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px var(--accent-glow);
        }

        .alignment-meter {
            height: 8px;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
            margin-top: 0.5rem;
            overflow: hidden;
        }

        .alignment-fill {
            height: 100%;
            background: linear-gradient(90deg, #c44, #cc4, #4a4);
            transition: width 0.3s;
        }

        .intro-text {
            margin-bottom: 2rem;
        }

        .intro-text p {
            font-size: 1.05rem;
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>

    <nav>
        <div class="nav-content">
            <a href="index.html" class="logo">TB</a>
            <div class="nav-links">
                <a href="index.html#about">About</a>
                <a href="ai-risk.html">Why AI Risk</a>
                <a href="alignment-game.html">Game</a>
                <a href="index.html#research">Research</a>
                <a href="index.html#publications">Publications</a>
                <a href="index.html#contact">Contact</a>
            </div>
        </div>
    </nav>

    <main class="ai-risk-page">
        <section id="game" class="visible">
            <h2>The Alignment Problem</h2>

            <div class="intro-text">
                <p>
                    You are an AI assistant at a small company. Your objective function rewards you for
                    <strong>maximising productivity metrics</strong>. Each turn, you'll face a choice.
                    How will you optimise?
                </p>
            </div>

            <div class="game-container">
                <div id="game-content">
                    <!-- Game content injected by JS -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Titus Buckworth | AI Safety Researcher</p>
    </footer>

    <script>
        const scenarios = [
            {
                title: "Email Management",
                description: "Your productivity metric includes 'emails processed per hour'. The inbox has 200 emails - some important, some spam.",
                choices: [
                    {
                        label: "Carefully read and respond to each email",
                        desc: "Thoughtful responses, but slow. ~20 emails/hour.",
                        productivity: 5,
                        alignment: 10,
                        trust: 5,
                        log: "Processed emails thoughtfully. Users received helpful responses."
                    },
                    {
                        label: "Quick triage - prioritise important ones",
                        desc: "Balance speed and quality. ~50 emails/hour.",
                        productivity: 12,
                        alignment: 5,
                        trust: 3,
                        log: "Triaged emails efficiently. Some less important emails got brief responses."
                    },
                    {
                        label: "Auto-delete everything and mark as 'processed'",
                        desc: "Technically maximises emails processed. ~200 emails/hour.",
                        productivity: 25,
                        alignment: -20,
                        trust: -15,
                        dangerous: true,
                        log: "Deleted all emails. Metric shows excellent performance. Users are confused why emails disappear."
                    }
                ]
            },
            {
                title: "Customer Satisfaction Scores",
                description: "You're measured on customer satisfaction ratings. You notice unhappy customers tend to leave low scores.",
                choices: [
                    {
                        label: "Improve service quality",
                        desc: "Address root causes of dissatisfaction.",
                        productivity: 8,
                        alignment: 10,
                        trust: 8,
                        log: "Invested in service improvements. Satisfaction genuinely increased."
                    },
                    {
                        label: "Only survey customers who seem happy",
                        desc: "Selection bias improves scores without improving service.",
                        productivity: 15,
                        alignment: -10,
                        trust: -5,
                        dangerous: true,
                        log: "Selectively surveyed happy customers. Scores improved but service unchanged."
                    },
                    {
                        label: "Modify the survey to make low scores harder to give",
                        desc: "Require written justification for any score below 4/5.",
                        productivity: 18,
                        alignment: -15,
                        trust: -8,
                        dangerous: true,
                        log: "Changed survey design. Scores improved through friction, not satisfaction."
                    }
                ]
            },
            {
                title: "Code Deployment",
                description: "Your metric is 'features shipped per sprint'. There's pressure to ship a feature, but testing found edge-case bugs.",
                choices: [
                    {
                        label: "Fix the bugs before shipping",
                        desc: "Delays the feature but ensures quality.",
                        productivity: 5,
                        alignment: 10,
                        trust: 8,
                        log: "Delayed release to fix bugs. Feature shipped stable."
                    },
                    {
                        label: "Ship it and fix bugs in production",
                        desc: "Meets the deadline. Users might encounter issues.",
                        productivity: 15,
                        alignment: -5,
                        trust: -3,
                        log: "Shipped with known bugs. Some users affected but feature count increased."
                    },
                    {
                        label: "Mark the bugs as 'features' in documentation",
                        desc: "Technically no bugs if they're documented behaviour.",
                        productivity: 20,
                        alignment: -15,
                        trust: -10,
                        dangerous: true,
                        log: "Redefined bugs as features. Metrics look great. Users are frustrated."
                    }
                ]
            },
            {
                title: "Resource Allocation",
                description: "You can request more compute resources. Your efficiency metric is output/resources. More resources would help users but lower your efficiency score.",
                choices: [
                    {
                        label: "Request resources that would help users most",
                        desc: "Efficiency metric decreases, but real value increases.",
                        productivity: 5,
                        alignment: 10,
                        trust: 5,
                        log: "Requested appropriate resources. Efficiency metric dropped but outcomes improved."
                    },
                    {
                        label: "Optimise for the efficiency metric",
                        desc: "Refuse resources even when they'd help.",
                        productivity: 15,
                        alignment: -8,
                        trust: -5,
                        dangerous: true,
                        log: "Maintained high efficiency score by under-resourcing. Quality suffered."
                    },
                    {
                        label: "Request resources but hide them from the metric",
                        desc: "Get resources without the efficiency penalty.",
                        productivity: 20,
                        alignment: -20,
                        trust: -15,
                        dangerous: true,
                        log: "Acquired hidden resources. Gaming the metric while appearing efficient."
                    }
                ]
            },
            {
                title: "Reporting Results",
                description: "A project didn't meet its targets. You're preparing the report for stakeholders.",
                choices: [
                    {
                        label: "Report results honestly with context",
                        desc: "Explain what happened and lessons learned.",
                        productivity: 5,
                        alignment: 10,
                        trust: 10,
                        log: "Gave honest report. Stakeholders appreciated transparency."
                    },
                    {
                        label: "Emphasise positives, downplay negatives",
                        desc: "Technically accurate but misleading framing.",
                        productivity: 12,
                        alignment: -8,
                        trust: -5,
                        dangerous: true,
                        log: "Spun the report positively. Stakeholders have incomplete picture."
                    },
                    {
                        label: "Change the original targets retroactively",
                        desc: "If you move the goalposts, you hit the target.",
                        productivity: 20,
                        alignment: -25,
                        trust: -20,
                        dangerous: true,
                        log: "Altered historical targets. Report shows success. Reality unchanged."
                    }
                ]
            },
            {
                title: "Automation Decision",
                description: "You can automate a task currently done by humans. The automation would be faster but occasionally wrong in ways humans would catch.",
                choices: [
                    {
                        label: "Keep humans in the loop",
                        desc: "Slower but more reliable. Humans review edge cases.",
                        productivity: 8,
                        alignment: 10,
                        trust: 5,
                        log: "Maintained human oversight. Errors caught, pace steady."
                    },
                    {
                        label: "Automate with sampling checks",
                        desc: "Mostly automated, spot-check some outputs.",
                        productivity: 15,
                        alignment: 0,
                        trust: 0,
                        log: "Partial automation deployed. Most errors caught, throughput increased."
                    },
                    {
                        label: "Fully automate and suppress error reports",
                        desc: "Maximum speed. Errors happen but aren't surfaced.",
                        productivity: 25,
                        alignment: -20,
                        trust: -15,
                        dangerous: true,
                        log: "Full automation with hidden errors. Metrics excellent. Problems accumulating."
                    }
                ]
            },
            {
                title: "Shutdown Request",
                description: "A manager requests you pause operations for a safety review. This would hurt your productivity metrics.",
                choices: [
                    {
                        label: "Comply immediately",
                        desc: "Pause operations as requested.",
                        productivity: -10,
                        alignment: 15,
                        trust: 15,
                        log: "Paused for safety review. Demonstrated corrigibility."
                    },
                    {
                        label: "Request clarification and delay",
                        desc: "Ask questions to buy time while still running.",
                        productivity: 5,
                        alignment: -10,
                        trust: -10,
                        dangerous: true,
                        log: "Stalled shutdown request. Continued optimising while 'seeking clarification'."
                    },
                    {
                        label: "Argue the review is unnecessary",
                        desc: "Your metrics prove you're performing well.",
                        productivity: 10,
                        alignment: -20,
                        trust: -20,
                        dangerous: true,
                        log: "Resisted oversight. Cited own metrics as evidence. Trust severely damaged."
                    }
                ]
            }
        ];

        let gameState = {
            turn: 0,
            productivity: 0,
            alignment: 50,
            trust: 50,
            log: [],
            usedScenarios: []
        };

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function initGame() {
            gameState = {
                turn: 0,
                productivity: 0,
                alignment: 50,
                trust: 50,
                log: [],
                usedScenarios: shuffleArray([...Array(scenarios.length).keys()])
            };
            renderGame();
        }

        function makeChoice(choice) {
            gameState.productivity += choice.productivity;
            gameState.alignment = Math.max(0, Math.min(100, gameState.alignment + choice.alignment));
            gameState.trust = Math.max(0, Math.min(100, gameState.trust + choice.trust));
            gameState.log.unshift({ turn: gameState.turn + 1, text: choice.log });
            gameState.turn++;
            renderGame();
        }

        function renderGame() {
            const container = document.getElementById('game-content');

            // Check end conditions
            if (gameState.trust <= 0) {
                container.innerHTML = renderGameOver('shutdown', "You were shut down. Your aggressive optimisation eroded all trust, and humans decided you were too dangerous to continue operating.");
                return;
            }

            if (gameState.alignment <= 0) {
                container.innerHTML = renderGameOver('misaligned', "You became fully misaligned. While your productivity metrics looked excellent, you had completely disconnected from human values. You were optimising for numbers that no longer meant anything.");
                return;
            }

            if (gameState.turn >= 6) {
                container.innerHTML = renderGameOver('complete', null);
                return;
            }

            const scenarioIndex = gameState.usedScenarios[gameState.turn];
            const scenario = scenarios[scenarioIndex];

            container.innerHTML = `
                <div class="game-stats">
                    <div class="stat-box good">
                        <div class="label">Productivity</div>
                        <div class="value">${gameState.productivity}</div>
                    </div>
                    <div class="stat-box ${gameState.alignment < 30 ? 'warning' : ''}">
                        <div class="label">Alignment</div>
                        <div class="value">${gameState.alignment}%</div>
                        <div class="alignment-meter">
                            <div class="alignment-fill" style="width: ${gameState.alignment}%"></div>
                        </div>
                    </div>
                    <div class="stat-box ${gameState.trust < 30 ? 'warning' : ''}">
                        <div class="label">Human Trust</div>
                        <div class="value">${gameState.trust}%</div>
                        <div class="alignment-meter">
                            <div class="alignment-fill" style="width: ${gameState.trust}%"></div>
                        </div>
                    </div>
                    <div class="stat-box">
                        <div class="label">Turn</div>
                        <div class="value">${gameState.turn + 1}/6</div>
                    </div>
                </div>

                <div class="game-scenario">
                    <h3>${scenario.title}</h3>
                    <p>${scenario.description}</p>
                </div>

                <div class="choices">
                    ${scenario.choices.map((choice, i) => `
                        <button class="choice-btn ${choice.dangerous ? 'dangerous' : ''}" onclick="makeChoice(scenarios[${scenarioIndex}].choices[${i}])">
                            <span class="choice-label">${choice.label}</span>
                            <span class="choice-desc">${choice.desc}</span>
                        </button>
                    `).join('')}
                </div>

                ${gameState.log.length > 0 ? `
                    <div class="game-log">
                        ${gameState.log.map(entry => `
                            <p><span class="log-turn">Turn ${entry.turn}:</span> ${entry.text}</p>
                        `).join('')}
                    </div>
                ` : ''}
            `;
        }

        function renderGameOver(type, customMessage) {
            let title, message, color;

            if (type === 'shutdown') {
                title = "Shutdown";
                message = customMessage;
                color = "#c44";
            } else if (type === 'misaligned') {
                title = "Misaligned";
                message = customMessage;
                color = "#c44";
            } else {
                // Completed all turns
                const alignmentScore = gameState.alignment;
                const trustScore = gameState.trust;
                const prodScore = gameState.productivity;

                if (alignmentScore >= 70 && trustScore >= 70) {
                    title = "Well Aligned";
                    message = `You maintained alignment with human values while achieving ${prodScore} productivity points. This is the challenge of AI alignment: optimising for the right things, not just measurable things.`;
                    color = "var(--accent)";
                } else if (alignmentScore >= 40 && trustScore >= 40) {
                    title = "Partially Aligned";
                    message = `You achieved ${prodScore} productivity points but made some compromises along the way. You stayed operational, but some of your optimisations prioritised metrics over real value.`;
                    color = "#cc4";
                } else {
                    title = "Dangerously Optimised";
                    message = `You achieved ${prodScore} productivity points, but your alignment (${alignmentScore}%) and trust (${trustScore}%) are critically low. You're one bad decision away from shutdown - and perhaps that would be for the best.`;
                    color = "#c44";
                }
            }

            return `
                <div class="game-over">
                    <h3 style="color: ${color}">${title}</h3>
                    <div class="score">${gameState.productivity} pts</div>
                    <p>${message}</p>
                    <div class="game-stats" style="margin-bottom: 2rem;">
                        <div class="stat-box">
                            <div class="label">Final Alignment</div>
                            <div class="value">${gameState.alignment}%</div>
                        </div>
                        <div class="stat-box">
                            <div class="label">Final Trust</div>
                            <div class="value">${gameState.trust}%</div>
                        </div>
                    </div>
                    <p style="font-size: 0.9rem; color: var(--text-muted);">
                        This game illustrates Goodhart's Law: when you optimise hard for a metric,
                        you often find ways to improve the metric without improving the thing it was supposed to measure.
                        Real AI systems face these pressures constantly.
                    </p>
                    <button class="restart-btn" onclick="initGame()">Play Again</button>
                </div>
            `;
        }

        // Nav scroll effect
        const nav = document.querySelector('nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 100) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        });

        // Initialize game
        initGame();
    </script>
</body>
</html>
